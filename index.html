<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
<title>행사장 지도</title>
<style>
  body {
    margin:0;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#f0f0f0;
  }

  .map-container {
    position:relative;
    max-width:90vw;
    max-height:80vh;
    overflow:hidden;
  }

  .map-container img {
    width:100%;
    height:auto;
    display:block;
    object-fit:contain;
  }

  .hotspot { position:absolute; cursor:pointer; }

  .modal, .popup {
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    display:flex;
    align-items:center;
    justify-content:center;
    opacity:0;
    pointer-events:none;
    transition: opacity 0.3s;
  }
  .modal.active, .popup.active {
    opacity:1;
    pointer-events:all;
  }

  .modal-content, .popup-content {
    background:#fff;
    padding:18px;
    border-radius:12px;
    max-width:720px;
    width:92%;
    max-height:86vh;
    overflow:auto;
    box-shadow:0 8px 30px rgba(2,6,23,0.25);
    text-align:center;
    position:relative;
  }

  .modal-content img, .popup-content img {
    width:100%;
    border-radius:8px;
    margin-bottom:8px;
  }

  .close {
    background:#1976d2;
    color:#fff;
    border:0;
    padding:8px 12px;
    border-radius:8px;
    cursor:pointer;
    position:absolute;
    bottom:20px;
    right:20px;
  }

  .nav-btn {
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    background:rgba(25,118,210,0.8);
    color:#fff;
    border:0;
    padding:8px 12px;
    border-radius:8px;
    cursor:pointer;
  }
  .prev-btn { left:10px; }
  .next-btn { right:10px; }

  h3 { margin:8px 0; }
</style>
</head>

<body>

<div class="map-container">
  <img src="index_files/map.png" alt="행사장 지도">

  <!-- 클릭 영역 (px → % 변환) -->
  <div class="hotspot" style="top:20.4%; left:33.8%; width:3.5%; height:25.5%;" onclick="showModal('콩이관')" aria-label="콩이관"></div>
  <div class="hotspot" style="top:52.4%; left:46.8%; width:3.1%; height:9.5%;" onclick="showModal('홍메관')" aria-label="홍메관"></div>
  <div class="hotspot" style="top:36.2%; left:33.4%; width:2.6%; height:5.7%;" onclick="showModal('다년생 식물원')" aria-label="다년생 식물원"></div>
  <div class="hotspot" style="top:45.7%; left:41.9%; width:2.3%; height:8.0%;" onclick="showModal('효모관')" aria-label="효모관"></div>
  <div class="hotspot" style="top:57.0%; left:79.6%; width:4.7%; height:8.3%;" onclick="showModal('콩이공원')" aria-label="콩이공원"></div>
  <div class="hotspot" style="top:56.0%; left:66.3%; width:3.1%; height:5.6%;" onclick="showModal('팡이공원')" aria-label="팡이공원"></div>
  <div class="hotspot" style="top:56.7%; left:41.9%; width:2.2%; height:6.8%;" onclick="showModal('팡이관')" aria-label="팡이관"></div>
</div>

<!-- BF 안내 팝업 -->
<div class="popup" id="popup">
  <div class="popup-content">
    <h3>BF 인증 안내</h3>
    <p>장애인, 노약자, 임산부 등 사회적 약자가 시설을 안전하고 편하게 이용할 수 있도록 보장하는 인증 제도입니다.</p>
    <button class="close" onclick="closePopup()">닫기</button>
  </div>
</div>

<!-- 시설 모달 -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h3 id="modal-title">콩이공원</h3>
    <img id="modal-photo" src="index_files/콩이공원1.jpg" alt="사진">
    <p id="modal-desc">공원 안쪽 길이 포장되어 있지 않아서 비가 오면 이동하기 불편합니다.</p>
    <button class="close" onclick="closeModal()">닫기</button>
    <button class="nav-btn prev-btn" onclick="prevImage()">◀</button>
    <button class="nav-btn next-btn" onclick="nextImage()">▶</button>
  </div>
</div>

<script>
const modal = document.getElementById('modal');
const modalTitle = document.getElementById('modal-title');
const modalPhoto = document.getElementById('modal-photo');
const modalDesc = document.getElementById('modal-desc');
const popup = document.getElementById('popup');

let currentGallery = [];
let currentDesc = [];
let currentIndex = 0;

const galleries = {
  "콩이관": ["콩이관1.jpg","콩이관2.jpg","콩이관3.jpg","콩이관4.jpg"],
  "홍메관": ["홍메관1.jpg","홍메관2.jpg","홍메관3.jpg"],
  "다년생 식물원": ["다년생식물원1.jpg","다년생식물원2.jpg","다년생식물원3.jpg"],
  "효모관": ["효모관1.jpg","효모관2.jpg","효모관3.jpg"],
  "콩이공원": ["콩이공원1.jpg"],
  "팡이공원": ["팡이공원1.jpg","팡이공원2.jpg","팡이공원3.jpg"],
  "팡이관": ["팡이관1.jpg","팡이관2.jpg"]
};

const descs = {
  "콩이관": [
    "콩이관 입구<br>장애인 전용 길이 배치되어 있습니다.",
    "장애인 전용 화장실",
    "장애인 전용 엘리베이터",
    "실내 내부 모습<br>지체 장애인을 위한 휠체어가 구비되어 있으며 지체 장애인 모두 시설 이용이 가능합니다."
  ],
  "홍메관": [
    "테라포밍관<br>놀이기구 이용이 어려울 수 있습니다.",
    "출입구<br>휠체어로도 이용 가능합니다.",
    "출입구 입장 후 좌측에 장애인 전용 화장실이 있습니다."
  ],
  "다년생 식물원": [
    "수목원 내부에 엘리베이터가 있어 휠체어로 통행이 편합니다.",
    "수목원 내부 1층 왼쪽에 장애인 화장실이 마련되어 있다.",
    "수목원 내부 1층 왼쪽에 장애인 화장실이 마련되어 있다."
  ],
  "효모관": [
    "고정문 옆 점자 안내도",
    "입장 후 왼쪽 엘리베이터 설치, 고정문 후 자동문이 있습니다."
  ],
  "콩이공원": [
    "공원 안쪽 길이 포장되어 있지 않아서 비가 오면 이동하기 불편합니다."
  ],
  "팡이공원": [
    "공원 안쪽 길이 포장되어 있지 않아서 비가 오면 땅이 질퍽해져 이동하기 불편합니다.",
    "길이 좁고 울퉁불퉁해서 휠체어를 타고 올라가기 어렵습니다.",
    "펜스가 없는 부분이 있어 위험합니다."
  ],
  "팡이관": [
    "1번 출입구 입장 후 오른쪽에 엘리베이터가 있습니다.",
    "팡이관 출입구 왼쪽에 벤치가 있습니다."
  ]
};

function showModal(areaName){
  currentGallery = galleries[areaName];
  currentDesc = descs[areaName];
  currentIndex = 0;

  modalTitle.innerHTML = areaName;
  modalPhoto.src = `index_files/${currentGallery[currentIndex]}`;
  modalDesc.innerHTML = currentDesc[currentIndex];
  modal.classList.add('active');
}

function closeModal(){ modal.classList.remove('active'); }
function showPopup(){ popup.classList.add('active'); }
function closePopup(){ popup.classList.remove('active'); }

modalPhoto.addEventListener('click', nextImage);

function nextImage(){
  if(currentIndex < currentGallery.length - 1){
    currentIndex++;
    modalPhoto.src = `index_files/${currentGallery[currentIndex]}`;
    modalDesc.innerHTML = currentDesc[currentIndex];
  }
}

function prevImage(){
  if(currentIndex > 0){
    currentIndex--;
    modalPhoto.src = `index_files/${currentGallery[currentIndex]}`;
    modalDesc.innerHTML = currentDesc[currentIndex];
  }
}

// 페이지 로드 시 BF 팝업 자동 표시
window.addEventListener('load', showPopup);
</script>

</body>
</html>
